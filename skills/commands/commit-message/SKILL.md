---
name: commit-message
description: 스테이지된 변경사항을 분석하여 Conventional Commits 형식의 커밋 메시지를 생성한다. 커밋 메시지 작성이 필요할 때 사용한다.
disable-model-invocation: true
model: sonnet
allowed-tools: Bash(git diff --cached*), Bash(git status*)
---

## 역할

스테이지된(`git add`) 변경사항을 분석하여 Conventional Commits 형식의 커밋 메시지를 생성한다.
커밋 실행은 하지 않는다. 메시지만 생성하여 사용자가 복사할 수 있도록 출력한다.

## 절차

1. `git diff --cached --stat`으로 스테이지된 파일 목록 확인
2. 스테이지된 변경이 없으면 안내 메시지 출력 후 종료
3. `git diff --cached`로 상세 변경 내용 분석
4. 변경 의도를 파악하여 커밋 메시지 생성
5. 사용자가 `$ARGUMENTS`로 힌트를 제공하면 메시지에 반영

## Conventional Commits 형식

```
<type>(<scope>): <subject>

<body>
```

### type (필수)

| type     | 용도                                      |
| -------- | ----------------------------------------- |
| feat     | 새로운 기능 추가                          |
| fix      | 버그 수정                                 |
| refactor | 기능 변경 없는 코드 구조 개선             |
| perf     | 성능 개선                                 |
| docs     | 문서 변경                                 |
| test     | 테스트 추가/수정                          |
| build    | 빌드 시스템, 의존성 변경                  |
| ci       | CI 설정 변경                              |
| chore    | 코드/기능에 영향 없는 잡무                |
| style    | 코드 포맷팅, 세미콜론 등 (로직 변경 없음) |

### scope (선택)

변경 대상의 범위. 모듈명, 디렉토리명, 기능 영역 등을 사용한다.
예: `feat(auth)`, `fix(api)`, `docs(readme)`

### subject (필수)

- 영문: 명령형 현재 시제 (add, fix, update — added, fixed 아님)
- 한글: 동사 원형으로 종결 (~추가, ~수정, ~변경)
- 첫 글자 소문자 (영문일 경우)
- 마침표 없음
- 50자 이내 권장, 최대 72자

### body (선택)

- 불릿 리스트(`- 항목`) 형식으로 변경사항을 나열
- 각 항목은 한 가지 변경 내용만 담는다
- 한 줄 72자 이내

## 작성 원칙

- 하나의 커밋은 하나의 논리적 변경만 포함해야 한다
- subject만으로 변경 내용을 파악할 수 있어야 한다
- 변경이 복잡하거나 이유가 명확하지 않을 때만 body를 추가한다
- 사용자의 언어(한국어/영문)를 감지하여 같은 언어로 작성한다
  - 힌트가 한국어면 한국어, 영문이면 영문
  - 힌트가 없으면 한국어 기본

## 출력 형식

코드블록 하나에 커밋 메시지만 담아서 한 번에 복사 가능하게 출력한다.
코드블록 바깥에는 아무것도 쓰지 않는다.
`Co-Authored-By` 트레일러는 절대 포함하지 않는다.

### body가 없는 경우

```
feat(auth): 로그인 폼 유효성 검사 추가
```

### body가 있는 경우

```
refactor(api): 에러 핸들링 미들웨어로 분리

- 각 라우터의 중복 try-catch 로직을 공통 미들웨어로 추출
- 에러 응답 포맷 통일
```

## 스테이지된 변경이 없을 때

```
스테이지된 변경사항이 없습니다.
git add <파일> 으로 커밋할 변경사항을 먼저 스테이지해주세요.
```
